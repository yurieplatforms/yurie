@import 'tailwindcss';
@plugin '@tailwindcss/typography';
@source "../node_modules/streamdown/dist/index.js";
@custom-variant dark (&:is(.dark *));

/*
  The default border color has changed to `currentColor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentColor);
  }
}

@layer base {
  html {
    overflow-y: scroll;
    scrollbar-gutter: stable both-edges;
  }
}

:root {
  --sh-class: #7aa2f7;
  --sh-sign: #89ddff;
  --sh-string: #9ece6a;
  --sh-keyword: #bb9af7;
  --sh-comment: #565f89;
  --sh-jsxliterals: #7aa2f7;
  --sh-property: #73daca;
  --sh-entity: #e0af68;
}

@layer utilities {
  /* Remove outer border from Streamdown-rendered tables (chat tables, markdown, etc.) */
  [data-streamdown="table"] {
    border-width: 0 !important;
  }

  /* Match table separator lines to PromptInput outline color */
  [data-streamdown="table"] thead,
  [data-streamdown="table"] tbody,
  [data-streamdown="table"] tr,
  [data-streamdown="table"] th,
  [data-streamdown="table"] td {
    border-color: rgb(212 212 216 / 1); /* zinc-300 */
  }

  .dark [data-streamdown="table"] thead,
  .dark [data-streamdown="table"] tbody,
  .dark [data-streamdown="table"] tr,
  .dark [data-streamdown="table"] th,
  .dark [data-streamdown="table"] td {
    border-color: rgb(39 39 42 / 1); /* zinc-800 */
  }

  /* Remove outer border from Streamdown-rendered code blocks */
  [data-code-block-container="true"],
  [data-code-block-container] {
    border-width: 0 !important;
  }

  /* Match code block separator line to PromptInput outline color */
  [data-code-block] {
    border-color: rgb(212 212 216 / 1); /* zinc-300 */
  }

  .dark [data-code-block] {
    border-color: rgb(39 39 42 / 1); /* zinc-800 */
  }

  /* Match AI-generated horizontal rule separators to PromptInput outline color */
  [data-streamdown="horizontal-rule"] {
    border-color: rgb(212 212 216 / 1); /* zinc-300 */
  }

  .dark [data-streamdown="horizontal-rule"] {
    border-color: rgb(39 39 42 / 1); /* zinc-800 */
  }

  /* PromptKit-style text loaders (text-blink, text-shimmer, loading-dots) */
  .loader-text-shimmer {
    position: relative;
    display: inline-block;
    background-image: linear-gradient(
      90deg,
      rgb(161 161 170 / 0.6),
      rgb(250 250 250 / 1),
      rgb(161 161 170 / 0.6)
    );
    background-size: 200% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: loader-text-shimmer 5s ease-in-out infinite;
  }

  .dark .loader-text-shimmer {
    background-image: linear-gradient(
      90deg,
      rgb(113 113 122 / 0.7),
      rgb(250 250 250 / 1),
      rgb(113 113 122 / 0.7)
    );
  }

  @keyframes loader-text-shimmer {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }

  .loader-text-blink {
    animation: loader-text-blink 1.1s ease-in-out infinite;
  }

  @keyframes loader-text-blink {
    0%,
    100% {
      opacity: 0.3;
    }
    50% {
      opacity: 1;
    }
  }

  .loader-loading-dots::after {
    content: '...';
    display: inline-block;
    width: 1.5em;
    text-align: left;
    animation: loader-loading-dots 1.4s steps(4, end) infinite;
  }

  @keyframes loader-loading-dots {
    0% {
      content: '';
    }
    25% {
      content: '.';
    }
    50% {
      content: '..';
    }
    75%,
    100% {
      content: '...';
    }
  }
}

@import 'tailwindcss';
@import "tw-animate-css";
@plugin '@tailwindcss/typography';
@source "../node_modules/streamdown/dist/index.js";
@custom-variant dark (&:is(.dark *));

/* Utility class for Zalando Sans font (logo) */
.font-zalando {
  font-family: 'Zalando Sans Expanded', sans-serif;
  font-weight: 600;
  font-style: italic;
}

/*
  The default border color has changed to `currentColor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-border);
  }
}

@layer base {
  html {
    overflow-y: auto;
  }

  /* Home page: no scrolling at any viewport size */
  html:has([data-page="home"]) {
    overflow: hidden;
  }

  body:has([data-page="home"]) {
    overflow: hidden;
  }
}

@layer base {
  :root {
    --card: #fcfcfc;
    --ring: #72e3ad;
    --input: #f6f6f6;
    --muted: #ededed;
    --accent: #ededed;
    --border: #dfdfdf;
    --radius: 0.5rem;
    --chart-1: #72e3ad;
    --chart-2: #3b82f6;
    --chart-3: #8b5cf6;
    --chart-4: #f59e0b;
    --chart-5: #10b981;
    --popover: #fcfcfc;
    --primary: #72e3ad;
    --sidebar: #fcfcfc;
    --font-mono: monospace;
    --font-sans: Outfit, sans-serif;
    --secondary: #fdfdfd;
    --background: #fcfcfc;
    --font-serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
    --foreground: #171717;
    --destructive: #ca3214;
    --shadow-blur: 3px;
    --shadow-color: #000000;
    --sidebar-ring: #72e3ad;
    --shadow-spread: 0px;
    --letter-spacing: 0.025em;
    --shadow-opacity: 0.17;
    --sidebar-accent: #ededed;
    --sidebar-border: #dfdfdf;
    --card-foreground: #171717;
    --shadow-offset-x: 0px;
    --shadow-offset-y: 1px;
    --sidebar-primary: #72e3ad;
    --muted-foreground: #202020;
    --accent-foreground: #202020;
    --popover-foreground: #525252;
    --primary-foreground: #1e2723;
    --sidebar-foreground: #707070;
    --secondary-foreground: #171717;
    --destructive-foreground: #fffcfc;
    --sidebar-accent-foreground: #202020;
    --sidebar-primary-foreground: #1e2723;

    /* Typography Scale */
    --font-size-xs: 0.75rem;      /* 12px */
    --font-size-sm: 0.8125rem;    /* 13px */
    --font-size-base: 0.9375rem;  /* 15px */
    --font-size-lg: 1.0625rem;    /* 17px */
    --font-size-xl: 1.25rem;      /* 20px */
    --font-size-2xl: 1.5rem;      /* 24px */
    --font-size-3xl: 1.875rem;    /* 30px */

    /* Line Heights */
    --line-height-tight: 1.25;
    --line-height-snug: 1.375;
    --line-height-normal: 1.5;
    --line-height-relaxed: 1.625;
    --line-height-loose: 1.75;

    /* Letter Spacing */
    --tracking-tighter: -0.03em;
    --tracking-tight: -0.015em;
    --tracking-normal: 0;
    --tracking-wide: 0.015em;
    --tracking-wider: 0.03em;

    /* Font Weights */
    --font-normal: 400;
    --font-medium: 500;
    --font-semibold: 600;
    --font-bold: 700;

    /* Semantic Aliases & Compatibility */
    --color-background: var(--background);
    --color-foreground: var(--foreground);
    --color-card: var(--card);
    --color-card-foreground: var(--card-foreground);
    --color-popover: var(--popover);
    --color-popover-foreground: var(--popover-foreground);
    --color-primary: var(--primary);
    --color-primary-foreground: var(--primary-foreground);
    --color-secondary: var(--secondary);
    --color-secondary-foreground: var(--secondary-foreground);
    --color-muted: var(--muted);
    --color-muted-foreground: var(--muted-foreground);
    --color-accent: var(--accent);
    --color-accent-foreground: var(--accent-foreground);
    --color-destructive: var(--destructive);
    --color-destructive-foreground: var(--destructive-foreground);
    --color-border: var(--border);
    --color-input: var(--input);
    --color-ring: var(--ring);
    --color-radius: var(--radius);

    /* Enhanced Semantic Tokens */
    --color-primary-hover: oklch(0.235 0 0);

    /* Legacy Mappings */
    --color-surface: var(--card);
    --color-surface-hover: var(--muted);
    --color-surface-active: var(--accent);
    --color-surface-elevated: var(--popover);
    --color-border-subtle: var(--muted);

    /* Input Specifics */
    --color-input-bg: var(--background);
    --color-input-border: var(--input);

    /* Shadows */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
    --shadow-lg: 0 8px 30px rgba(0, 0, 0, 0.12);
    --shadow-accent: 0 4px 14px oklch(0 0 0 / 0.08);
    --shadow-destructive: 0 4px 14px oklch(0.577 0.245 27.325 / 0.25);

    /* Radius */
    --radius-sm: calc(var(--radius) - 2px);
    --radius-md: var(--radius);
    --radius-lg: var(--radius);
    --radius-xl: calc(var(--radius) + 4px);
    --radius-2xl: calc(var(--radius) + 8px);
    --radius-full: 9999px;
    --radius-input: 28px;
    --radius-card: var(--radius);
    --radius-dialog: calc(var(--radius) + 8px);
    --radius-prompt: 1.625rem;

    /* Spacing */
    --space-input-x: 1rem;
    --space-input-y: 0.625rem;
    --space-card: 1rem;
    --space-section: 1.5rem;

    /* Transitions */
    --transition-fast: 150ms ease;
    --transition-base: 200ms ease;
    --transition-slow: 300ms ease;

    /* Chart Colors exposed as vars */
    --color-chart-1: var(--chart-1);
    --color-chart-2: var(--chart-2);
    --color-chart-3: var(--chart-3);
    --color-chart-4: var(--chart-4);
    --color-chart-5: var(--chart-5);

    /* Sidebar Colors */
    --color-sidebar: var(--sidebar);
    --color-sidebar-foreground: var(--sidebar-foreground);
    --color-sidebar-primary: var(--sidebar-primary);
    --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
    --color-sidebar-accent: var(--sidebar-accent);
    --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
    --color-sidebar-border: var(--sidebar-border);
    --color-sidebar-ring: var(--sidebar-ring);

    /* Info/Success/Warning Colors */
    --color-info: var(--chart-2);
    --color-info-foreground: #ffffff;
    --color-success: #4c7c64;
    --color-success-foreground: #ffffff;
    --color-warning: #c7863e;
    --color-warning-foreground: #ffffff;

    /* Syntax Highlighting */
    --sh-class: #61afef;
    --sh-sign: #56b6c2;
    --sh-string: #98c379;
    --sh-keyword: #c678dd;
    --sh-comment: #7f848e;
    --sh-jsxliterals: #61afef;
    --sh-property: #e5c07b;
    --sh-entity: #e06c75;
  }

  .dark {
    --card: #171717;
    --ring: #4ade80;
    --input: #242424;
    --muted: #1f1f1f;
    --accent: #313131;
    --border: #292929;
    --chart-1: #4ade80;
    --chart-2: #60a5fa;
    --chart-3: #a78bfa;
    --chart-4: #fbbf24;
    --chart-5: #2dd4bf;
    --popover: #242424;
    --primary: #006239;
    --sidebar: #121212;
    --secondary: #242424;
    --background: #121212;
    --foreground: #e2e8f0;
    --destructive: #541c15;
    --sidebar-ring: #4ade80;
    --sidebar-accent: #313131;
    --sidebar-border: #292929;
    --card-foreground: #e2e8f0;
    --sidebar-primary: #006239;
    --muted-foreground: #a2a2a2;
    --accent-foreground: #fafafa;
    --popover-foreground: #a9a9a9;
    --primary-foreground: #dde8e3;
    --sidebar-foreground: #898989;
    --secondary-foreground: #fafafa;
    --destructive-foreground: #ede9e8;
    --sidebar-accent-foreground: #fafafa;
    --sidebar-primary-foreground: #dde8e3;

    /* Semantic Aliases & Compatibility (Dark) */
    --color-background: var(--background);
    --color-foreground: var(--foreground);
    --color-card: var(--card);
    --color-card-foreground: var(--card-foreground);
    --color-popover: var(--popover);
    --color-popover-foreground: var(--popover-foreground);
    --color-primary: var(--primary);
    --color-primary-foreground: var(--primary-foreground);
    --color-secondary: var(--secondary);
    --color-secondary-foreground: var(--secondary-foreground);
    --color-muted: var(--muted);
    --color-muted-foreground: var(--muted-foreground);
    --color-accent: var(--accent);
    --color-accent-foreground: var(--accent-foreground);
    --color-destructive: var(--destructive);
    --color-destructive-foreground: var(--destructive-foreground);
    --color-border: var(--border);
    --color-input: var(--input);
    --color-ring: var(--ring);

    /* Enhanced Semantic Tokens */
    --color-primary-hover: oklch(0.875 0 0); 

    /* Legacy Mappings */
    --color-surface: var(--card);
    --color-surface-hover: #404040;
    --color-surface-active: var(--accent);
    --color-surface-elevated: var(--popover);
    --color-border-subtle: var(--muted);

    /* Input Specifics */
    --color-input-bg: var(--background);
    --color-input-border: var(--input);

    /* Shadows */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.2);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 8px 30px rgba(0, 0, 0, 0.4);
    --shadow-accent: 0 4px 14px oklch(0 0 0 / 0.35);
    --shadow-destructive: 0 4px 14px oklch(0.704 0.191 22.216 / 0.25);

    /* Info/Success/Warning Colors */
    --color-info: var(--chart-2);
    --color-info-foreground: #ffffff;
    --color-success: #34d399;
    --color-success-foreground: #ffffff;
    --color-warning: #fbbf24;
    --color-warning-foreground: #ffffff;

    /* Syntax Highlighting */
    --sh-class: #79c0ff;
    --sh-sign: #a5d6ff;
    --sh-string: #a5d6a7;
    --sh-keyword: #ff7eb6;
    --sh-comment: #8b949e;
    --sh-jsxliterals: #79c0ff;
    --sh-property: #ffa657;
    --sh-entity: #ff7b72;
  }
}

@theme inline {
  --color-card: var(--card);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-muted: var(--muted);
  --color-accent: var(--accent);
  --color-border: var(--border);
  --color-radius: var(--radius);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-popover: var(--popover);
  --color-primary: var(--primary);
  --color-sidebar: var(--sidebar);
  --color-font-mono: var(--font-mono);
  --color-font-sans: var(--font-sans);
  --color-secondary: var(--secondary);
  --color-background: var(--background);
  --color-font-serif: var(--font-serif);
  --color-foreground: var(--foreground);
  --color-destructive: var(--destructive);
  --color-shadow-blur: var(--shadow-blur);
  --color-shadow-color: var(--shadow-color);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-shadow-spread: var(--shadow-spread);
  --color-letter-spacing: var(--letter-spacing);
  --color-shadow-opacity: var(--shadow-opacity);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-border: var(--sidebar-border);
  --color-card-foreground: var(--card-foreground);
  --color-shadow-offset-x: var(--shadow-offset-x);
  --color-shadow-offset-y: var(--shadow-offset-y);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent-foreground: var(--accent-foreground);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary-foreground: var(--primary-foreground);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);

  /* Additional Semantic Tokens (from legacy) */
  --color-primary-hover: var(--color-primary-hover);
  --color-surface: var(--color-surface);
  --color-surface-hover: var(--color-surface-hover);
  --color-surface-active: var(--color-surface-active);
  --color-surface-elevated: var(--color-surface-elevated);

  /* Success/Warning/Info */
  --color-success: var(--color-success);
  --color-warning: var(--color-warning);
  --color-info: var(--color-info);

  /* Radius & Shadows */
  --radius-sm: var(--radius-sm);
  --radius-md: var(--radius-md);
  --radius-lg: var(--radius-lg);
  --radius-xl: var(--radius-xl);
  --radius-2xl: var(--radius-2xl);
  --radius-full: var(--radius-full);
  --radius-input: var(--radius-input);
  --radius-card: var(--radius-card);

  --shadow-sm: var(--shadow-sm);
  --shadow-md: var(--shadow-md);
  --shadow-lg: var(--shadow-lg);
  --shadow-accent: var(--shadow-accent);
  --shadow-destructive: var(--shadow-destructive);
}

@layer utilities {
  /* Hide scrollbar for Chrome, Safari and Opera */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* Hide scrollbar for IE, Edge and Firefox */
  .no-scrollbar {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }

  /* Hide Streamdown streaming cursor indicator */
  [data-streamdown-cursor],
  .streamdown-cursor,
  [data-streamdown] [data-cursor],
  [data-streamdown]::after {
    display: none !important;
  }

  /* Remove outer border from Streamdown-rendered tables (chat tables, markdown, etc.) */
  [data-streamdown="table"] {
    border-width: 0 !important;
  }

  /* Match table separator lines to PromptInput outline color */
  [data-streamdown="table"],
  [data-streamdown="table"] thead,
  [data-streamdown="table"] tbody,
  [data-streamdown="table"] tr,
  .prose table,
  .prose thead,
  .prose tbody,
  .prose tr,
  .prose-gray table,
  .prose-gray thead,
  .prose-gray tbody,
  .prose-gray tr {
    border-color: var(--color-border);
    background-color: transparent;
  }

  /* Remove vertical borders from table cells, keep only horizontal */
  [data-streamdown="table"] th,
  [data-streamdown="table"] td,
  .prose th,
  .prose td,
  .prose-gray th,
  .prose-gray td {
    border-color: var(--color-border);
    border-left: none;
    border-right: none;
    background-color: transparent;
  }

  .dark [data-streamdown="table"],
  .dark [data-streamdown="table"] thead,
  .dark [data-streamdown="table"] tbody,
  .dark [data-streamdown="table"] tr,
  .dark .prose table,
  .dark .prose thead,
  .dark .prose tbody,
  .dark .prose tr,
  .dark .prose-gray table,
  .dark .prose-gray thead,
  .dark .prose-gray tbody,
  .dark .prose-gray tr {
    border-color: var(--color-border);
    background-color: transparent;
  }

  .dark [data-streamdown="table"] th,
  .dark [data-streamdown="table"] td,
  .dark .prose th,
  .dark .prose td,
  .dark .prose-gray th,
  .dark .prose-gray td {
    border-color: var(--color-border);
    border-left: none;
    border-right: none;
    background-color: transparent;
  }

  /* Remove outer border from Streamdown-rendered code blocks */
  [data-streamdown="code-block"],
  [data-code-block-container="true"],
  [data-code-block-container] {
    border-width: 0 !important;
  }

  /* Match code block border + background colors to user chat bubble (muted) */
  [data-streamdown="code-block"],
  [data-code-block-container="true"],
  [data-code-block-container] {
    background-color: var(--muted) !important; 
  }

  .dark [data-streamdown="code-block"],
  .dark [data-code-block-container="true"],
  .dark [data-code-block-container] {
    background-color: var(--popover) !important;
  }

  /* Inner code area border + background */
  [data-streamdown="code-block-body"],
  [data-code-block] {
    border-top-width: 0 !important; /* remove separator line under header */
    border-color: var(--color-border);
    background-color: var(--muted) !important;
  }

  .dark [data-streamdown="code-block-body"],
  .dark [data-code-block] {
    border-color: var(--color-border);
    background-color: var(--popover) !important;
  }

  /* Remove extra space between header and code, and force unified background */
  [data-streamdown="code-block-body"] pre,
  [data-streamdown="code-block-body"] pre code,
  [data-streamdown="code-block"] pre,
  [data-streamdown="code-block"] pre code,
  [data-code-block] pre,
  [data-code-block] pre code {
    margin-top: 0;
    margin-bottom: 0;
    background-color: var(--muted) !important;
  }

  .dark [data-streamdown="code-block-body"] pre,
  .dark [data-streamdown="code-block-body"] pre code,
  .dark [data-streamdown="code-block"] pre,
  .dark [data-streamdown="code-block"] pre code,
  .dark [data-code-block] pre,
  .dark [data-code-block] pre code {
    background-color: var(--popover) !important;
  }

  /* Code block header surface + text (match code background) */
  [data-streamdown="code-block-header"],
  [data-code-block-header],
  [data-streamdown="code-block"] > div:first-child,
  [data-code-block-container] > div:first-child {
    background-color: var(--muted) !important;
    color: var(--color-foreground);
    border-bottom: 1px solid var(--color-border);
  }

  .dark [data-streamdown="code-block-header"],
  .dark [data-code-block-header],
  .dark [data-streamdown="code-block"] > div:first-child,
  .dark [data-code-block-container] > div:first-child {
    background-color: var(--popover) !important;
    color: var(--color-foreground);
    border-bottom: 1px solid var(--color-border);
  }

  /* Code block line numbers - match placeholder text color (muted-foreground) */
  [data-streamdown="code-block-body"] code > span::before,
  [data-streamdown="code-block"] code > span::before {
    color: var(--color-muted-foreground) !important;
    opacity: 1 !important;
  }

  /* Dark mode code block text - force high contrast readable colors */
  .dark [data-streamdown="code-block-body"] pre code,
  .dark [data-streamdown="code-block"] pre code,
  .dark [data-code-block] pre code,
  .dark pre code,
  .dark pre.shiki code {
    color: #e6edf3 !important;
  }

  /* Boost text brightness only, not background */
  .dark pre.shiki span,
  .dark pre.shiki code span,
  .dark [data-streamdown] pre span,
  .dark [data-streamdown] pre code span,
  .dark [data-streamdown="code-block"] pre span,
  .dark [data-streamdown="code-block-body"] pre span {
    filter: brightness(1.7) saturate(1.15) !important;
  }

  /* Specific token color overrides for dark mode - vibrant palette */
  .dark pre code .token.comment,
  .dark pre code .token.prolog,
  .dark pre code .token.doctype,
  .dark pre code .token.cdata {
    color: #8b949e !important;
    font-style: italic;
  }

  .dark pre code .token.punctuation {
    color: #c9d1d9 !important;
  }

  .dark pre code .token.property,
  .dark pre code .token.tag,
  .dark pre code .token.constant,
  .dark pre code .token.symbol,
  .dark pre code .token.deleted {
    color: #ff7b72 !important;
  }

  .dark pre code .token.boolean,
  .dark pre code .token.number {
    color: #79c0ff !important;
  }

  .dark pre code .token.selector,
  .dark pre code .token.attr-name,
  .dark pre code .token.string,
  .dark pre code .token.char,
  .dark pre code .token.builtin,
  .dark pre code .token.inserted {
    color: #a5d6a7 !important;
  }

  .dark pre code .token.operator,
  .dark pre code .token.entity,
  .dark pre code .token.url,
  .dark pre code .token.variable {
    color: #a5d6ff !important;
  }

  .dark pre code .token.atrule,
  .dark pre code .token.attr-value,
  .dark pre code .token.function,
  .dark pre code .token.class-name {
    color: #d2a8ff !important;
  }

  .dark pre code .token.keyword {
    color: #ff7eb6 !important;
  }

  .dark pre code .token.regex,
  .dark pre code .token.important {
    color: #ffa657 !important;
  }

  /* Hide horizontal rule separators in AI responses */
  [data-streamdown="horizontal-rule"],
  .prose hr,
  .prose-gray hr {
    display: none;
  }

  .dark [data-streamdown="horizontal-rule"],
  .dark .prose hr,
  .dark .prose-gray hr {
    display: none;
  }

  /* Match blockquote left border to user chat bubble color */
  .prose blockquote,
  .prose-gray blockquote,
  [data-streamdown] blockquote {
    border-left-color: var(--color-primary);
    background: linear-gradient(to right, color-mix(in srgb, var(--color-primary) 5%, transparent), transparent);
    padding: 0.75rem 1rem;
    margin-left: 0;
    margin-right: 0;
    border-radius: 0 0.5rem 0.5rem 0;
    font-style: italic;
  }

  .prose blockquote p,
  .prose-gray blockquote p,
  [data-streamdown] blockquote p {
    margin: 0;
  }

  .dark .prose blockquote,
  .dark .prose-gray blockquote,
  .dark [data-streamdown] blockquote {
    border-left-color: var(--color-primary);
    background: linear-gradient(to right, color-mix(in srgb, var(--color-primary) 8%, transparent), transparent);
  }

  /* Match inline code background to border/separator color */
  .prose code:not(pre code),
  .prose-gray code:not(pre code),
  [data-streamdown] code:not(pre code) {
    background-color: var(--color-border);
  }

  .dark .prose code:not(pre code),
  .dark .prose-gray code:not(pre code),
  .dark [data-streamdown] code:not(pre code) {
    background-color: var(--color-border);
  }

  /* Bullet points - force them to use the muted-foreground color */
  .prose ul > li::marker,
  .prose-gray ul > li::marker,
  .prose ol > li::marker,
  .prose-gray ol > li::marker {
    color: var(--color-muted-foreground) !important;
  }

  .dark .prose ul > li::marker,
  .dark .prose-gray ul > li::marker,
  .dark .prose ol > li::marker,
  .dark .prose-gray ol > li::marker {
    color: var(--color-muted-foreground) !important;
  }

  /* Enhanced list typography */
  .prose ul,
  .prose-gray ul,
  .prose ol,
  .prose-gray ol {
    padding-left: 1.5rem;
  }

  .prose li,
  .prose-gray li {
    padding-left: 0.25rem;
  }

  /* Nested list styling */
  .prose ul ul,
  .prose-gray ul ul,
  .prose ol ol,
  .prose-gray ol ol,
  .prose ul ol,
  .prose-gray ul ol,
  .prose ol ul,
  .prose-gray ol ul {
    margin-top: 0.5rem;
    margin-bottom: 0.25rem;
  }


  /* Paragraph with better rhythm */
  .prose p + p,
  .prose-gray p + p {
    margin-top: 1.25rem;
  }

  /* Add spacing before headings (when not first element) */
  .prose h1,
  .prose h2,
  .prose-gray h1,
  .prose-gray h2 {
    margin-top: 2.5rem;
  }

  .prose h3,
  .prose h4,
  .prose-gray h3,
  .prose-gray h4 {
    margin-top: 2rem;
  }

  /* Better heading separation from content */
  .prose h1 + *,
  .prose h2 + *,
  .prose h3 + *,
  .prose-gray h1 + *,
  .prose-gray h2 + *,
  .prose-gray h3 + * {
    margin-top: 1.25rem !important;
  }

  /* Numbered list prefix styling */
  .prose ol > li {
    counter-increment: list-counter;
  }

  .prose ol > li::marker {
    font-weight: 500;
  }

  /* AI-generated links in prose content - use primary color */
  .prose a,
  .prose-gray a,
  [data-streamdown] a {
    color: var(--color-primary);
    text-decoration: underline;
    text-underline-offset: 2px;
    transition: color 0.15s ease;
  }

  .prose a:hover,
  .prose-gray a:hover,
  [data-streamdown] a:hover {
    color: var(--color-primary-hover);
  }

  .dark .prose a,
  .dark .prose-gray a,
  .dark [data-streamdown] a {
    color: var(--color-primary);
  }

  .dark .prose a:hover,
  .dark .prose-gray a:hover,
  .dark [data-streamdown] a:hover {
    color: var(--color-primary-hover);
  }

  /* KaTeX LaTeX math styling */
  .prose .katex {
    font-size: 1.3em !important;
  }

  .prose .katex-display {
    margin: 1.5rem 0;
    overflow-x: auto;
    overflow-y: hidden;
    padding: 0.75rem 0;
  }

  .prose .katex-display > .katex {
    text-align: center;
    font-size: 1.6em !important;
  }

  /* Math display blocks styling */
  .prose .math-display,
  [data-streamdown] .math-display {
    margin: 1.5rem 0;
    padding: 1rem;
    border-radius: 0.5rem;
    background-color: var(--color-surface);
    overflow-x: auto;
  }

  .dark .prose .math-display,
  .dark [data-streamdown] .math-display {
    background-color: var(--popover);
  }

  /* Inline math styling - subtle background for readability */
  .prose .math-inline,
  [data-streamdown] .math-inline {
    padding: 0.1em 0.2em;
    border-radius: 0.25rem;
  }

  /* Profile avatar ring animation */
  .avatar-ring {
    position: relative;
  }

  .avatar-ring::before {
    content: '';
    position: absolute;
    inset: -4px;
    border-radius: 9999px;
    padding: 2px;
    background: conic-gradient(
      from 0deg,
      color-mix(in srgb, var(--color-ring) 85%, var(--color-background)),
      color-mix(in srgb, var(--color-info) 75%, var(--color-background)),
      color-mix(in srgb, var(--color-ring) 85%, var(--color-background))
    );
    -webkit-mask: 
      linear-gradient(#fff 0 0) content-box, 
      linear-gradient(#fff 0 0);
    mask: 
      linear-gradient(#fff 0 0) content-box, 
      linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    opacity: 0;
    transform: scale(0.95);
    transition: opacity 0.3s ease, transform 0.3s ease;
  }

  .avatar-ring:hover::before {
    opacity: 1;
    transform: scale(1);
  }

  .avatar-ring.active::before {
    opacity: 1;
    transform: scale(1);
  }

  /* PromptKit-style text loaders (text-blink, loading-dots) */
  .loader-text-blink {
    animation: loader-text-blink 1.1s ease-in-out infinite;
  }

  @keyframes loader-text-blink {
    0%,
    100% {
      opacity: 0.3;
    }
    50% {
      opacity: 1;
    }
  }

  .loader-loading-dots::after {
    content: '...';
    display: inline-block;
    width: 1.5em;
    text-align: left;
    animation: loader-loading-dots 1.4s steps(4, end) infinite;
  }

  @keyframes loader-loading-dots {
    0% {
      content: '';
    }
    25% {
      content: '.';
    }
    50% {
      content: '..';
    }
    75%,
    100% {
      content: '...';
    }
  }
}

